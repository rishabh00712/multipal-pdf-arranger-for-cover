<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Process PDFs from Google Drive</title>
  <link rel="stylesheet" href="/styles/style.css">
</head>
<body>
  <h1>Submit Drive Folder Link</h1>

  <form id="pdfForm" action="/process-pdfs" method="POST">
    <input type="text" name="driveLink" placeholder="Paste Google Drive folder link" required />
    <button type="submit">Process PDFs</button>
    <div class="loading-overlay" id="loader">
      <div class="spinner"></div>
    </div>
  </form>

  <% if (typeof skippedFiles !== 'undefined' && skippedFiles.length > 0) { %>
    <h2>❌ Skipped Files:</h2>
    <ul>
      <% skippedFiles.forEach(file => { %>
        <li><%= file %></li>
      <% }); %>
    </ul>
  <% } %>

  <% if (typeof showDownload !== 'undefined' && showDownload && zipName) { %>
    <form method="GET" action="/download/<%= zipName %>">
      <button type="submit">⬇ Download ZIP</button>
    </form>
  <% } %>

  <script>
    const form = document.getElementById('pdfForm');
    const loader = document.getElementById('loader');

    form.addEventListener('submit', function () {
      loader.style.display = 'flex';
    });
  </script>
</body>
</html>
